[
  {
    "$lookup": {
      "from": "medicos",
      "localField": "medicoId",
      "foreignField": "_id",
      "as": "medicoInfo"
    }
  },
  {
    "$unwind": {
      "path": "$medicoInfo",
      "preserveNullAndEmptyArrays": true
    }
  },
  {
    "$lookup": {
      "from": "hospitais",
      "localField": "hospitalId",
      "foreignField": "_id",
      "as": "hospitalInfo"
    }
  },
  {
    "$unwind": {
      "path": "$hospitalInfo",
      "preserveNullAndEmptyArrays": true
    }
  },
  {
    "$project": {
      "_id": 1,
      "hospitalId": "$hospitalInfo._id",
      "hospitalNome": "$hospitalInfo.razaoSocial",
      "hospitalCategoria": "$hospitalInfo.categoria",
      "medicoId": "$medicoInfo._id",
      "medicoNome": "$medicoInfo.nome",
      "medicoConselho": "$medicoInfo.conselho"
    }
  }
]
