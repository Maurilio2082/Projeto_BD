[
  {
    "$lookup": {
      "from": "medicos",
      "localField": "medicoId",
      "foreignField": "_id",
      "as": "medicoInfo"
    }
  },
  {
    "$unwind": {
      "path": "$medicoInfo",
      "preserveNullAndEmptyArrays": false
    }
  },
  {
    "$lookup": {
      "from": "especialidades",
      "localField": "especialidadeId",
      "foreignField": "_id",
      "as": "especialidadeInfo"
    }
  },
  {
    "$unwind": {
      "path": "$especialidadeInfo",
      "preserveNullAndEmptyArrays": false
    }
  },
  {
    "$project": {
      "_id": 0,
      "especialidadeId": "$especialidadeInfo._id",
      "especialidadeNome": "$especialidadeInfo.nomeEspecialidade",
      "medicoId": "$medicoInfo._id",
      "medicoNome": "$medicoInfo.nome",
      "medicoConselho": "$medicoInfo.conselho"
    }
  }
]
